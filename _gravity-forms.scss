/*
* Use existing Bootstrap 4 classes and
* variables to extend - override GF style
*
*/

.gform_wrapper {
    //@extend .container;
    form {
        // @extend .container;

        .gform_heading {
            // This is the form title and description, if set to display
            @extend .w-100, .mb-2;
            .gform_title { 
                @extend .h3, .mt-3, .w-100;
            } // title
            .gform_description {
                @extend .d-block, .jumbotron, .px-3, .py-4, .col-12;
                background-color: lighten( $info, 55% );
                border-color: $gray-400;
                border-left: 5px solid $info !important;                
                font-size: $font-size-base * 1.1;
            } // description
        } // heading
      
        .gform_body {
            @extend .w-100, .pt-3;
            .gform_fields { // this is a ul generated by GF
                @extend .list-unstyled, .w-100;
                .gravity-forms-section-tabs-head {
                    @extend .mb-4;
                    a {
                        @extend .nav-link;
                    }
                }

                .gfield { // these are the li elements
                    @extend .form-group, .form-row, .mb-3;
                    
                    // SECTION BREAK
                    &.gsection {
                        @extend .w-100, .clearfix;
                        h2.gsection_title {
                            @extend .h4;
                        }      
                        .gsection_description {
                            @extend .col-12, .p-3, .mt-3, .mb-2, .border, .rounded;
                            font-size: $font-size-base * 1.1;
                            border-color: $gray-400;
                            border-left: 5px solid $info !important;
                        }                  
                    } // gsection

                    // HIDDEN LABELS
                    &.hidden_label {
                        label {
                            @extend .invisible; // want it to take up the space and not mess with the layout
                        }
                    }     
                    
                    // HIDDEN FIELDS 
                    &.gform_hidden {
                        @extend .sr-only; // not invisible - we don't want it taking any layout space
                    }

                    // REQUIRED FIELDS
                    &.gfield_contains_required {
                        .gfield_label {
                            @extend .text-danger;
                        }
                        input, select, textarea {
                            @extend .border-danger;
                        }
                    }

                    // FIELD LABEL 
                    .gfield_label {
                        @extend .col-form-label;
                        font-weight: 600;  
                        .gfield_required {
                            color: darken ( $danger, 20% );
                            font-weight: bold;
                        } // required                                                      
                    }

                    // THE ACTUAL INPUT CONTAINER
                    .ginput_container, .ginput_complex, .ginput_container_name, .ginput_container_select  {
                        @extend .col;
                    }      
        
                    .gfield_description { // help text
                        @extend .small, .text-muted, .form-text;
                    }
                    
                    // complex fields like time
                    .clear-multi {
                        //@extend .row;
                        @extend .input-group;
                        .ginput_container_date {
                            .gfield_date_day, .gfield_date_month, .gfield_date_year {
                                input[type=text] {
                                    @extend .col-12, .col-sm-4, .col-md-3;
                                }
                            }
                        }                          
                        .ginput_container_time {
                            .gfield_time_hour, .gfield_time_minute, .gfield_time_ampm {
                                i {
                                    @extend .input-group-append, .input-group-text;
                                }
                                input[type=text] {
                                    //@extend .col-12, .col-sm-4, .col-md-3;
                                }                          
                            }
                        }
                    }
                    
                    .ginput_container_checkbox, .ginput_container_radio {
                        @extend .col, .form-check;
                        .gfield_checkbox, .gfield_radio {
                            @extend .list-unstyled, .ml-3;                            
                            label {
                                @extend .form-check-label;
                            }
                        }
                    }

                    &.form-check-inline {
                        .gfield_checkbox, .gfield_radio {
                            @extends .list-inline;
                            li {
                                @extend .list-inline-item, .mr-5;
                            }
                        }
                    }                    
                    
/*
<input type="button">
<input type="color">
<input type="image">
<input type="range">
<input type="reset">
<input type="submit">

*/

                    input[type=text], 
                    input[type=date], 
                    input[type=datetime-local], 
                    input[type=email], 
                    input[type=password], 
                    input[type=month], 
                    input[type=number], 
                    input[type=search], 
                    input[type=tel], 
                    input[type=time], 
                    input[type=url], 
                    input[type=week], 
                    textarea, select {
                        @extend .form-control;
                        &.small { @extend .form-control-sm; }
                        &.large { @extend .form-control-lg; }
                    }     
                    
                    textarea {
                        height: auto;                        
                    }

                    input[type=file] {
                        @extend .form-control-file;                        
                    }

                    input[type=range] {
                        @extend .form-control-range;                        
                    }                        

                    input[type=checkbox], input[type=radio] {
                        @extend .form-check-input;
                    }                    
            
                    .ginput_container_name {
                        @extend .form-inline;
                        .name_first, .name_last, .name_middle, .name_prefix, .name_suffix {
                            padding-left: 0;
                            @extend .col;
                            input[type=text] { 
                                @extend .col;
                            }
                            label {
                                text-align: left;
                            }
                        }
                        .name_prefix {
                            @extend .col-auto;
                        }
                        .name_suffix {
                            @extend .col-1;
                        }
                        .name_middle, .name_middle input[text] {
                            //@extend .col-auto;
                        }                        
                    } // name

                    .gform_fileupload_multifile {
                        @extend .p-4, .bg-light;
                        border: 2px dashed $gray-400; 
                    } // gform_fileupload_multifile

                    .ginput_container_consent {
                        input[type=checkbox] { @extend .ml-0; }
                        label.gfield_consent_label { @extend .ml-4; }
                    }

                    // TOGGLE SWITCHES
                    // TODO - why isn't this working?
                    &.custom-control {
                        .gfield_checkbox {
                            input[type=checkbox] {
                                @extend .custom-control-input;
                            }
                            label {
                                @extend .custom-control-label;
                            }
                        }
                    }

                } // individual gfield                

                // FORMS WITH LABELS ON THE LEFT
                &.left_label {
                    .gfield { 
                        .gfield_label {
                            @extend .col-12, .col-sm-4, .col-md-3;
                        } // label
                        .gfield_description { // help text
                            @extend .col-12, .col-sm-6, .col-md-9, .offset-sm-4, .offset-md-3;
                        }            
                        .clear-multi {
                            @extend .col-12, .col-sm-6, .col-md-9, .offset-sm-4, .offset-md-3;
                        }                                
                    } // gfield
                } // left_label

                // FORMS WITH LABELS ON THE RIGHT. This is actually still on the left, just righ-aligned text!!!
                &.right_label {
                    .gfield { 
                        .gfield_label {
                            @extend .col-12, .col-sm-4, .col-md-3, .text-sm-right;
                        } // label
                        .gfield_description  { // help text
                            @extend .col-12, .col-sm-6, .col-md-9, .offset-sm-4, .offset-md-3;
                        }  
                        .clear-multi {
                            @extend .col-12, .col-sm-6, .col-md-9, .offset-sm-4, .offset-md-3;
                        }                                          
                    } // gfield
                } // right_label

                // FORMS WITH LABELS ON THE TOP. 
                &.top_label  {
                    .gfield { 
                        @extend .row;
                        .gfield_label {
                            @extend .col-12;
                        } // label
                        .ginput_container {
                            @extend .col-12, .ml-2;
                            input {  }
                        }
                        .gfield_description { // help text
                            @extend .col-12;
                        }        
                        .clear-multi {
                            @extend .col-12;
                        }                                      
                    } // gfield
                
                } // top_label

            } // fields 
        
        } // body
    
        .gform_footer {
            @extend .col-12, .text-center, .mt-2, .mx-auto;
            .button {
                @extend .btn, .btn-success, .btn-lg;
            }
        }
        
        .gfield_visibility_ {
            @extend .sr-only;
        }
        
        fieldset.gfieldset {
          background: $gray-100;
          padding: $spacer;
          legend {
            background: $white;
            display: inline-block;
            padding: 0 $spacer;
            width: auto;
          }
        }
        
    } // form
} //wrapper



// VALIDATION ERRORS
.gform_wrapper {
    &.gform_validation_error {
        form {
            //@extend .was-validated;
            // this is the alert box that appears at the top of the form
            .validation_error {
                @extend .alert, .alert-danger;
            } // validation_error
            .gform_body {
                .gform_fields {
                    .gfield {
                        &.gfield_error {
                            .gfield_label {
                                @extend .text-danger;
                            }
                            input, textarea, select {
                                @extend .is-invalid;
                                background-color: lighten( $danger, 40% );
                                &:focus {
                                   //box-shadow: 0 0 0 0.2rem rgba(220,53,69,.25);
                                }
                            } // input
                            
                            .gfield_description{
                                &.validation_message {
                                    color: $danger !important;
                                } //validation message
                            } // gfield_description
                        } // gfield_error
                    }
                }
            }
        } // form
    } // gform_validation_error
} // gform_wrapper


  
 // this is the field that usually says something like  
 // This field is for validation purposes and should be left unchanged.
 .gform_validation_container {
    @extend .sr-only;
  }


  // TODO: Tooltips
